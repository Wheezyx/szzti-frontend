<div class="item-container mat-elevation-z8">
  <div class="loading-shade" *ngIf="loading">
    <mat-spinner *ngIf="loading"></mat-spinner>
  </div>
  <div
    *ngIf="loading || dataSource.data.length > 0"
    class="rental-table-container"
  >
    <table
      mat-table
      [dataSource]="dataSource"
      class="rental-table"
      matSort
      matSortActive="created"
      matSortDisableClear
      matSortDirection="desc"
    >

    <ng-container matColumnDef="select">
      <th mat-header-cell *matHeaderCellDef>
      </th>
      <td mat-cell *matCellDef="let row">
        <mat-checkbox (click)="$event.stopPropagation()"
                      (change)="$event ? selection.toggle(row) : null"
                      [checked]="selection.isSelected(row)"
                      [aria-label]="checkboxLabel(row)">
        </mat-checkbox>
      </td>
    </ng-container>
    
      <ng-container matColumnDef="itemName">
        <th mat-header-cell *matHeaderCellDef mat-sort-header disableClear>
          Nazwa przedmiotu
        </th>
        <td mat-cell *matCellDef="let rental">
          {{ rental.item.fullItemName }}
          <button mat-icon-button (click)="handleViewItem(rental.item?.id)">
            <mat-icon aria-label="View">visibility</mat-icon>
          </button>
        </td>
      </ng-container>

      <ng-container matColumnDef="placeName">
        <th mat-header-cell *matHeaderCellDef mat-sort-header disableClear>
          Nazwa sali
        </th>
        <td mat-cell *matCellDef="let rental">
          {{ rental.place != null ? rental.place.name : "Brak" }}
          <button *ngIf="rental.place" mat-icon-button (click)="handleViewPlace(rental.place?.id)">
            <mat-icon aria-label="View">visibility</mat-icon>
          </button>
        </td>
      </ng-container>

      <ng-container matColumnDef="renterCode">
        <th mat-header-cell *matHeaderCellDef mat-sort-header disableClear>
          Kod osoby wypożyczającej
        </th>
        <td mat-cell *matCellDef="let rental">
          {{ rental.renter != null ? rental.renter.code : "Brak" }}
          <button *ngIf="rental.renter" mat-icon-button (click)="handleViewRenter(rental.renter?.id)">
            <mat-icon aria-label="View">visibility</mat-icon>
          </button>
          <button mat-icon-button (click)="openDeleteConfirmationDialog(rental)">
            <mat-icon aria-label="Delete">delete</mat-icon>
          </button>
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let rental; columns: displayedColumns" (click)="selection.toggle(rental)"></tr>
    </table>

    <mat-paginator
      [length]="resultsLength"
      [pageSize]="[10]"
      [pageSizeOptions]="[10, 20, 100]"
    ></mat-paginator>
  </div>
</div>
<div *ngIf="dataSource.data.length === 0">
  Nie znaleziono.
</div>
